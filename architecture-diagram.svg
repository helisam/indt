<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="800" height="600" viewBox="0 0 800 600">
  <!-- Estilo do diagrama -->
  <defs>
    <style type="text/css">
      .microservice {
        fill: #e1f5fe;
        stroke: #0288d1;
        stroke-width: 2;
      }
      .layer {
        fill: #f5f5f5;
        stroke: #9e9e9e;
        stroke-width: 1;
        stroke-dasharray: 5,5;
      }
      .database {
        fill: #e8f5e9;
        stroke: #388e3c;
        stroke-width: 2;
      }
      .queue {
        fill: #fff3e0;
        stroke: #ff9800;
        stroke-width: 2;
      }
      .title {
        font-family: Arial, sans-serif;
        font-size: 24px;
        font-weight: bold;
      }
      .subtitle {
        font-family: Arial, sans-serif;
        font-size: 18px;
        font-weight: bold;
      }
      .label {
        font-family: Arial, sans-serif;
        font-size: 14px;
      }
      .small-label {
        font-family: Arial, sans-serif;
        font-size: 12px;
        font-style: italic;
      }
      .arrow {
        stroke: #616161;
        stroke-width: 2;
        fill: none;
        marker-end: url(#arrowhead);
      }
      .dashed-arrow {
        stroke: #616161;
        stroke-width: 2;
        stroke-dasharray: 5,5;
        fill: none;
        marker-end: url(#arrowhead);
      }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#616161" />
    </marker>
  </defs>
  
  <!-- Título do diagrama -->
  <text x="400" y="40" text-anchor="middle" class="title">Arquitetura do Sistema de Gestão de Propostas de Seguro</text>
  
  <!-- PropostaService -->
  <rect x="100" y="100" width="250" height="350" rx="10" ry="10" class="microservice" />
  <text x="225" y="130" text-anchor="middle" class="subtitle">PropostaService</text>
  
  <!-- Camadas do PropostaService -->
  <rect x="120" y="150" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="225" y="185" text-anchor="middle" class="label">API</text>
  
  <rect x="120" y="220" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="225" y="255" text-anchor="middle" class="label">Application</text>
  
  <rect x="120" y="290" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="225" y="325" text-anchor="middle" class="label">Domain</text>
  
  <rect x="120" y="360" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="225" y="395" text-anchor="middle" class="label">Infrastructure</text>
  <text x="225" y="415" text-anchor="middle" class="small-label">PropostaStatusProducer</text>
  
  <!-- ContratacaoService -->
  <rect x="450" y="100" width="250" height="350" rx="10" ry="10" class="microservice" />
  <text x="575" y="130" text-anchor="middle" class="subtitle">ContratacaoService</text>
  
  <!-- Camadas do ContratacaoService -->
  <rect x="470" y="150" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="575" y="185" text-anchor="middle" class="label">API</text>
  
  <rect x="470" y="220" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="575" y="255" text-anchor="middle" class="label">Application</text>
  
  <rect x="470" y="290" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="575" y="325" text-anchor="middle" class="label">Domain</text>
  
  <rect x="470" y="360" width="210" height="60" rx="5" ry="5" class="layer" />
  <text x="575" y="395" text-anchor="middle" class="label">Infrastructure</text>
  <text x="575" y="415" text-anchor="middle" class="small-label">PropostaMessageConsumer</text>
  
  <!-- Banco de dados PostgreSQL -->
  <rect x="150" y="500" width="150" height="60" rx="5" ry="5" class="database" />
  <text x="225" y="535" text-anchor="middle" class="label">PostgreSQL (Propostas)</text>
  
  <rect x="500" y="500" width="150" height="60" rx="5" ry="5" class="database" />
  <text x="575" y="535" text-anchor="middle" class="label">PostgreSQL (Contratos)</text>
  
  <!-- Fila SQS -->
  <rect x="325" y="400" width="150" height="60" rx="5" ry="5" class="queue" />
  <text x="400" y="425" text-anchor="middle" class="label">AWS SQS</text>
  <text x="400" y="445" text-anchor="middle" class="small-label">proposta-status-queue</text>
  
  <!-- LocalStack -->
  <rect x="325" y="470" width="150" height="30" rx="5" ry="5" fill="#f3e5f5" stroke="#8e24aa" stroke-width="2" />
  <text x="400" y="490" text-anchor="middle" class="small-label">LocalStack (Dev/Test)</text>
  
  <!-- Conexões -->
  <path d="M 225 420 L 225 500" class="arrow" />
  <path d="M 575 420 L 575 500" class="arrow" />
  
  <!-- Fluxo de mensagens -->
  <path d="M 330 390 L 400 400" class="arrow" />
  <text x="340" y="380" class="small-label">1. Envia status</text>
  
  <path d="M 400 460 L 470 390" class="arrow" />
  <text x="450" y="440" class="small-label">2. Consome mensagem</text>
  
  <path d="M 575 420 L 575 460 L 500 500" class="dashed-arrow" />
  <text x="590" y="460" class="small-label">3. Cria contrato</text>
  
  <!-- Legenda -->
  <rect x="600" y="50" width="20" height="20" class="microservice" />
  <text x="625" y="65" class="label">Microserviço</text>
  
  <rect x="600" y="80" width="20" height="20" class="layer" />
  <text x="625" y="95" class="label">Camada</text>
  
  <rect x="700" y="50" width="20" height="20" class="database" />
  <text x="725" y="65" class="label">Banco de Dados</text>
  
  <rect x="700" y="80" width="20" height="20" class="queue" />
  <text x="725" y="95" class="label">Fila de Mensagens</text>
</svg>